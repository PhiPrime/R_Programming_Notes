---
title: "R Programming"
author: "Coursera Course by John Hopkins University"
date: "INSTRUCTORS: Dr. Jeff Leek, Dr. Roger D. Peng, Dr. Brian Caffo"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
***
# Overview of R, R data types and objects, reading and writing data

## Installing R & RStuido
* This was covered in the [previous course](https://docs.google.com/document/d/12Co5sjoHIaxAcpTWHRSIs8APAqIlaoOVMFRdGCsMKU0/edit?usp=sharing).

## Swirl
* swirl teaches you R programming and data science interactively, at your own pace, and right in the R console.  
* Start swirl  
  + install the package "swirl" if you haven't yet  
  + Everytime you want to run swirl execute:  
    - library("swirl")  
    - swirl()  
  + You'll then be prompted to install a course  
  + [Help page for swirl](https://swirlstats.com/help.html)  

## History of S and R programming
* What is S?  
  + R is a dialect of S  
  + S was developed by John Chambers and others at Bell Labs  
  + Initiated in 1976 as an internal statistical analysis environment, implemented as Fortran libraries
    - Early versions did not contain functions for statistical modeling  
  + Version 3 was released in 1988, which was rewritten in C and began to resemble the system that we have today.  
  + Version 4 was released in 1998 and is the version we use today.  
    - This version is documented in *Programming with Data* by John Chambers (the green book) 
  + Insightful sells its implementation of the S language under the name *S-PLUS*, which includes a number of fancy features, mostly GUIs. 
  + S won the Association for Computing Machinery's Software System Award in '98  
  + (More about S)[https://web.archive.org/web/20181014111802/ect.bell-labs.com/sl/S/]  

* What is R?  
  + R was developed by Ross Ihaka and Robert Gentleman, they documented thier experience in a (1996 JCGS paper)[https://amstat.tandfonline.com/doi/abs/10.1080/10618600.1996.10474713].  
  + In 1995, R become free software after Martin Machler convinced Ross & Robert to use the GNU (General Public License)  
  + Versions  
    - R version 1.0.0 was released in 2000  
    - R version 3.0.2 is released in Dec. 2013  
  + Syntax is similar to S, making it easy for S-PLUS users to switch over  
  + Runs on almost any standard computing platform/OS (even on the PS3)  
  + Frequent releases; active development and communities  
  + Funtionality is divided into modular packages as to keep it "lean"  
  + It's free!  
  + What is free about Free Software?  
    - Freedom 0: freedom to run the program, for any purpose  
    - Freedom 1: freedom to study how the program works, and adapt it to one's needs. Which implies access to the source code
    - Freedom 2: freedom to redistribute copies
    - Freedom 3: freedom to improve the program, and release your improvements to the public, or to sell them.
    - These are outlined by the (Free Software Foundation)[https://www.fsf.org/]  

* Drawbacks of R  
  + Essentially based on 40 year old technology,the original S language
  + Little build support for dynamic or 3D graphics. Although there are packages for such
  + Functionality is based on consumer demand and use contributions, if a feature is not present you'll have to build it.  
  + Objects that are manipulated in R have to be stored in the physical memory of the computer, as such if an object is bigger than the memory you'll be unable to load it into memory  
  + Not ideal for all possible situations, such as calling to order pizza (but this is a drawback of all software packages)  

*Design of the R System  
  + "base" R system that can be downloaded from (CRAN)[http://cran.r-project.org] (krey-an) which...  
    - contains the packages: **utils, stats, datasets, graphics, grDevices, grid, methods, tools, parallel, compiler, splines, tcltk, stats4**.  
    - and "Recommends" the packages: **boot, class, cluster, codetools, foreign, KernSmooth, lattice, mgcv, nlme, rpart, survival, MASS, spatial, nnet, Matrix**.  
  + Packages are available all around the web, but packages on CRAN have to meet a certain level of quality.  

* Some Useful Books on S/R  
  + Chambers (2008). *Software for Data Analysis*, Springer.    
  + Chambers (1998). *Programming with Data*, Springer.  
  + Venables & Ripley (2002). *Modern Applied Statistics with S*, Springer.  
  + Venables & Ripley (2000). *S Programming*, Springer.   
  + Pinheiro & Bates (2000). *Mixed-Effects Models in S and S-Plus*, Springer.  
  + Murrell (2005). *R Graphics*, Chapman & Hall/CRC Press.  
  + (Additional Books)[http://www.r-project.org/doc/bib/R-books.html]  

## Review of getting help
* [Covered in previous course](https://docs.google.com/document/d/12Co5sjoHIaxAcpTWHRSIs8APAqIlaoOVMFRdGCsMKU0/edit?usp=sharing)  

## Input and Evaluation: Vocabulary/Syntax

* **Expressions -** The code that is typed into the R prompt.  
* **Assignment Operator -** assigns a value to a symbol, Ex:  
```x <- 1```  
* *Output a variable*:  
```{r echo= TRUE}
x <- 36
print(x) ##explicit printing
## or one can just type the variable 
x ##auto-printing
```

* *Comment:* Use a Hash(#) symbol to make a comment to the right of #  
* *[1]* is indicating the following variable is the first element of the vector

```{r echo= TRUE}
x <- 1:30 ##Loads x with the numbers 1 to 30
print(x)
## here, [26] is telling you the next number is the 26th element of the vector
```

* `Inf` - represents infinity and can be used in ordinary calculations (Ex: 1 / `Inf` is 0)  
* `Nan` - represents an undefined value ("not a number") (Ex: 0/0 is `NaN`).  
  + Can also be thought of as a missing value  
* **Attributes -** Some objects in R come with attributes. These attributes can be set or modified with the expression `attributes()`. They are:  
  + names, dimnames (dimension names)
  + dimensions (e.g. matrices, arrays) - number of rows & cols, or more depending on dimensions of array
  + class - the data type of the object
  + length - number of elements
  + other user-defined attributes/metadata can be added  
* **Coercion -** occurs so that every element of a vector is of the same class (Covered further in Vector section)  



## Differences between atomic data types

* R has five basic, or "atomic", classes of objects:  
  + character  
    - In `R` there is no `string` data type. It is also considered part of the `character` data type
  + numeric (real numbers)  
    - R thinks as numbers as these by default  
  + integer  
    - Must be explicity declared with the L suffix; `x <- 1` assigns a numeric object, but `x <- 1L` explicitly assigns an integer  
  + complex   
  + logical (True/False)  

* A vector can only contain objects of the same class  
  + an empty vector can be created with `vector()`  
* However, a **list** is represented as a vector but can contain objects of different classes (as such we usually use these)  

## Vectors, Lists, and Matrices   

* The `c()` function (can be thought to stand for "concatenate")  
  + Can be used to create vectors of objects  
```{r}
x <- c(0.5, 0.6) ## numeric
x <- c(TRUE, FALSE) ## logical
x <- c(T, F) ## logical
x <- c("a", "b", "c") ## character
x <- c(1+0i, 2+4i) ## complex
```
* The `vector()` function  
  + Can also be used to create, you guessed it, vectors  
```{r}
x <- vector() ## Creates an empty vector
x ## Prints as code that evaluates as FALSE

x <- vector(mode = "numeric", length = 10) ## Creates a vector with length "10" of 
## numeric data type,default value is 0
x

x <- vector("numeric", 5) ##The parameter names are not required, but can easily clarify code
x
```
  + When different objects are mixed in a vector, **coercion** occurs so all objects are of the same class.  
    - R will implicitly create the "Least Common Denominator" of the mixed classes
```{r}
y <- c(1.7, "a") ## character
y

y <- c(TRUE, 2) ## numeric
y

y <- c("a", TRUE) ## character
y
y[2] ## "TRUE" is a string stored as a "character" data type
y[3] ## The third element does not exist
```
    
  + Objects can be **explicitly coerced** from onne class to another using the `as.*` functions, if available.  
    - Nonsensical coercion reasults in `NA`s
```{r}
x <- 0:6
class(x)
as.numeric(x)
as.logical(x)
as.character(x)
as.complex(x)
x
y <- as.character(x)
y

x <- c("a", "b", "c")
as.numeric(x) ##Nonsensical coercion will also show a warning
as.logical(x)
as.complex(x)
```
    
* Lists (Important data type in R that you should get to know well)
  + Lists are a type of vector that can contain elements of different classes.
  + Doesn't print like a vector because every element is different
    - prints index of element with double brackets bordering it: `[[1]]`
```{r}
x <- list(1, "a", TRUE, 1 + 4i, 16 +18i)
x
```
  
* **Matrices -** a type of vector with a *dimension* attribute.  
  + The *dimension* attribute is itself an integer vector of length 2 (numRows, numCols)
  + Constructed *column-wise*, so entries can be thought of starting in the "upper left" corner, then running down the columns  
  + Matrices can also be created by adding a *dimension* attribute to an existing vector
```{r}
m <- matrix(nrow = 2, ncol = 3)
m
dim(m)##reports num of rows then cols
attributes(m) ## dim is an attribute of the vector
m <- matrix(1:6, 2, 3) ## Demonstrating column-wise filling of matrix
m

m <- 1:10 ## m is now just a vector
m

dim(m) <- c(2,5) ## adding the dimension attribute
m
```

  + Creating a matrix with **cbind** and **rbind**
    - cbind fills the columns with the elements of the vectors that are passed as the respective parameters
    - likewise, rbind fills the rows with the elements of the respective parameters
```{r}
x <- 1:3
y <- 10:12
cbind(x,y)
rbind(x,y)
```
    
## Other data types
* Factors  
  + Used to represent categorical data  
  + can be unordered or ordered
  + Kinda like enumerated data, where it's an integer at heart, and each integer has a *label*
  + Using factors with labels is *better* than using integers because factors are self-describing
    - consider "Male" and "Female" as opposed to just the values 1 and 2
  + Prints differently than a character value, does not include quotations and displays *Levels*
```{r}
x <- factor(c("yes", "yes", "no", "yes", "no"))
x
table(x) ## displays a frequency table of the factors
unclass(x) ## strips out the class and displays the underlying integer vector
```
  + The order of the levels can be set with the `levels` argument to `factor()`
    - This can be important in linear modelling because the first level is sued as the baseline level.
    - default levels are based alphabetically 
```{r}
x <- factor(
        c("yes", "yes", "no", "yes", "no"),
        levels = c("yes", "no")
        )
x
```
    
  
  
* Missing Values (`NA` or `NaN`)
  + `NaN` is for undefined mathematical operations
  + `is.na()` and `is.nan()` are logical tests for the respective missing values
  + `NA` values have a class also, so there are integer `NA`, character `NA`, etc.
  + a `NaN` is also a `NA`, however the converse is not true
```{r}
x <- c(1, 2, NA, 10, 3)
is.na(x)
is.nan(x)
x <- c(1, 2, NaN, NA, 4)
is.na(x)
is.nan(x)
```
  
  
* Data Frames
  + Used to store tabular data
  + Special type of list where every element has to have the same length
  + Each element is like a column and the length of each element is the number of rows
  + like lists, Data Frames can store different classes in each column
  + Attribute: `row.names`
    - Useful for annotating data
    - However, often the row names are not interesting and we use "1, 2, 3..."
  + Usually created by calling `read.table()` or `read.csv()`
  + Can be converted to a matrix with `data.matrix()`
    - Forces each object to be coerced
```{r}
x <- data.frame(foo = 1:4, bar = c(T, T, F, F))## cols are named here
x
nrow(x)
ncol(x)
row.names(x)

```

  
* Names Attribute, useful for writing readable code and self-describing objects
  + Any R object can have names
```{r}
x <- 1:3
names(x)## by default there are no names
names(x) <- c("foo", "bar", "norf")
x
names(x)

##Lists can also have names
x <- list(a=1, b=2, c=3) ## here, names are assigned as list is established
x

## Matrices can also have names, called dimnames
m <- matrix(1:4, nrow = 2, ncol = 2)
m
dimnames(m) <- list(c("a", "b"), c("c", "d")) ##First vector is rownames, second is colnames
m
```
  

## Basic Arithmetic operations

## Subset R objects using the "[", "[[", and "$" operators and logical vectors

## The explicit coercion feature of R

## Removing missing (NA) values from a vector


# Control structures, functions, scoping rules, dates and times



# Loop functions, debugging tools


# Simulation, code profiling
